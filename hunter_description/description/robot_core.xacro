<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

    <!-- REF: https://youtu.be/BcjHyhV0kIs?si=dUpg7IF-kHSUgB-w -->
    <!-- Robot website: https://robosavvy.co.uk/agilex-hunter-2b.html -->

    <!-- Include the inertial values from the following -->
    <xacro:include filename="inertial_macros.xacro"/>    

    <!-- BASE LINK ================================================================== -->
    <link name="base_link"/>

    <!-- CHASSIS JOINT & LINK ======================================================= -->
    <joint name="chassis_joint" type="fixed">
        <parent link="base_link"/>
        <child link="chassis"/>
        <origin xyz="0 0 0.26" rpy="0 0 0" />
    </joint>

    <link name="chassis">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/> 
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/chassis.dae" />
            </geometry>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/> 
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/chassis.dae" />
            </geometry>
        </collision>

        <xacro:inertial_chassis/>
    </link>

    <!-- ============================================================================ -->
    <!-- REAR LEFT WHEEL JOINT & LINK -->
    <joint name="rear_left_wheel_joint" type="continuous">
        <parent link="chassis"/>
        <child link="rear_left_wheel"/> 
        <origin xyz="-0.28 0.29249 -0.19558" rpy="${pi/2} 0 0" />
        <axis   xyz="0 0 -1" />
        <dynamics damping="0.0" friction="15"/>    
    </joint>
    <link name="rear_left_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/rear_left_wheel.dae" />
            </geometry>        
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/rear_left_wheel.dae" />
            </geometry>            
        </collision>
        <xacro:inertial_wheel/>
    </link>


    <!-- =========================================================================-0.19558=== -->
    <!-- REAR RIGHT WHEEL JOINT & LINK -->
    <joint name="rear_right_wheel_joint" type="continuous">
        <parent link="chassis"/>
        <child link="rear_right_wheel"/> 
        <origin xyz="-0.28018 -0.29251 -0.19558" rpy="${pi/2} 0 0" />
        <axis xyz="0.0 0.0 -1.0"/>
        <dynamics damping="0.0" friction="15"/>
    </joint>
    <link name="rear_right_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/rear_right_wheel.dae" />
            </geometry>        
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/rear_right_wheel.dae" />
            </geometry>            
        </collision>
        <xacro:inertial_wheel/>
    </link>


    <!-- ============================================================================ -->
    <!-- FRONT STEER JOINT & LINK -->
    <joint name="front_steer_joint" type="fixed">
        <origin xyz="0.44792 -1.1431E-05 -0.121" rpy="0 0 0" />
        <parent link="chassis" />
        <child  link="front_steer" />
        <axis   xyz="0 0 0" />
    </joint>
    <link name="front_steer">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/front_steer_link.STL" />
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/front_steer_link.STL" />
            </geometry>
        </collision>
        <inertial>
            <origin xyz="0.049836 8.1046E-15 0.017912" rpy="0 0 0" />
            <mass value="0.0049179" />
            <inertia
                ixx="1.6846E-07"
                ixy="7.6396E-23"
                ixz="-1.0974E-08"
                iyy="7.549E-07"
                iyz="-1.8957E-22"
                izz="7.334E-07" />
        </inertial>
    </link>


    <!-- ============================================================================ -->
    <!-- FRONT STEER LEFT WHEEL JOINT & LINK -->
    <joint name="front_left_steer_joint" type="revolute">
        <parent link="chassis"/>
        <child link="front_steer_left_wheel"/> 
        <origin xyz="0.37142 0.29199 -0.1955" rpy="${pi/2} 0 0" />
        <axis   xyz="0 1 0" />
        <limit  lower="-0.69"  upper="0.69"  effort="0"  velocity="0" />
    </joint>
    <link name="front_steer_left_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
            <material
                name="">
                <color rgba="0.79216 0.81961 0.93333 1" />
            </material>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
        <inertial>
            <origin xyz="-0.012614 1.8116E-05 0.0023132" rpy="0 0 0" />
            <mass value="0.8526" />
            <inertia
                ixx="0.063827"
                ixy="0"
                ixz="0"
                iyy="0.063827"
                iyz="0"
                izz="0.11091" />
        </inertial>
    </link>


    <!-- ============================================================================ -->
    <!-- FRONT LEFT WHEEL JOINT & LINK -->
    <joint name="front_left_wheel_joint" type="continuous">
        <parent link="front_steer_left_wheel"/>
        <child link="front_left_wheel"/> 
        <origin xyz="0 0 0" rpy="0 0 0" />
        <axis   xyz="0 0 -1" />
        <dynamics damping="0.0" friction="15"/>
    </joint>
    <link name="front_left_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/front_left_wheel.dae" />
            </geometry>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/front_left_wheel.dae" />
            </geometry>
        </collision>
        <xacro:inertial_wheel/>
    </link>


    <!-- ============================================================================ -->
    <!-- FRONT STEER RIGHT WHEEL JOINT & LINK -->
    <joint name="front_right_steer_joint" type="revolute">
        <parent link="chassis"/>
        <child link="front_steer_right_wheel"/> 
        <origin xyz="0.37142 -0.29201 -0.1955" rpy="${pi/2} 0 0" />
        <axis   xyz="0 1 0" />
        <limit  lower="-0.69"  upper="0.69"  effort="0"  velocity="0" />
    </joint>
    <link name="front_steer_right_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
            <material
                name="">
                <color rgba="0.79216 0.81961 0.93333 1" />
            </material>
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <cylinder length="0.001" radius="0.005"/>
            </geometry>
        </collision>
        <inertial>
            <origin xyz="-8.9374E-08 1.0997E-07 0.0095958" rpy="0 0 0" />
            <mass value="0.8526" />
            <inertia
                ixx="0.063827"
                ixy="0"
                ixz="0"
                iyy="0.063827"
                iyz="0"
                izz="0.11091" />
        </inertial>
    </link>

    <!-- ============================================================================ -->
    <!-- FRONT RIGHT WHEEL JOINT & LINK -->
    <joint name="front_right_wheel_joint" type="continuous">
        <parent link="front_steer_right_wheel"/>
        <child link="front_right_wheel"/> 
        <origin xyz="0 0 0" rpy="0 0 0" />
        <axis xyz="0 0 -1" />
        <dynamics damping="0.0" friction="15"/>
    </joint>
    <link name="front_right_wheel">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/front_right_wheel.dae" />
            </geometry>        
        </visual>
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <mesh filename="file://$(find hunter_description)/meshes/front_right_wheel.dae" />
            </geometry> 
        </collision>
        <xacro:inertial_wheel/>
    </link>

</robot>

